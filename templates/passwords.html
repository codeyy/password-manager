{% extends "layout.html" %}
{% block main %}
<div id="main-pass-container">
    <div id="glow"></div>
    <div>
        <nav>
            <span><a href="/"><img width="50" src="/static/favicon.png" alt="logo"></span></a>
            <div>
                <a><button id="pass-showpassword" class="top-buttons">Show Passwords</button></a>
                <a href="/"><button class="top-buttons" id="pass-home">HOME</button></a>
                <a href="/add-password" method="GET"><button class="top-buttons" id="pass-add_p">Add
                        Password</button></a>
                <a href="/logout" method="GET"><button class="top-buttons" id="pass-logout">Logout</button></a>
            </div>
        </nav>
    </div>
    <div class="dash-table-container">
        <table class="table">
            <tr class="pass-table-rows">
                <th title="The name of the website/app/service the password is for.">Service</th>
                <th title="The username or email used for that service.">Username</th>
                <th title="The Password used for that service">Password</th>
                <th title="Optional label to organize passwords.">Category</th>
                <th title="The Last time you updated the Password">Last Updated</th>
            </tr>
            {% for entry in entries %}
            <tr>
                <td>{{ entry[0] }}</td>
                <td>{{ entry[1] }}</td>
                <td>{{ entry[2] }} </td>
                <td>{{ entry[3] }}</td>
                <td style="margin: auto">{{ entry[4] }}</td>
            </tr>
            {% endfor %}
    </div>
</div>
<script>
    document.getElementById('pass-showpassword').addEventListener('click', function () {
        const targetElement = document.getElementById('main-pass-container');
        targetElement.innerHTML = ''; // Clear existing content

        const form = document.createElement('form');
        form.setAttribute('method', 'POST');
        form.setAttribute('class', 'Pass_form');
        form.setAttribute('action', '/passwords');
        targetElement.appendChild(form);

        const label = document.createElement('label');
        label.textContent = "Verify Your Password: ";
        label.setAttribute('class', 'pass-label');
        form.appendChild(label);

        form.appendChild(document.createElement('br'));
        form.appendChild(document.createElement('br'));

        const passwordInput = document.createElement('input');
        passwordInput.setAttribute('type', 'password');
        passwordInput.setAttribute('name', 'password');
        passwordInput.setAttribute('required', true);
        passwordInput.setAttribute('autofocus', true);
        passwordInput.setAttribute('placeholder', 'Password');
        passwordInput.setAttribute('class', 'form-input');
        form.appendChild(passwordInput);

        const br = document.createElement('br');
        form.appendChild(br);

        const submitButton = document.createElement('button');
        submitButton.setAttribute('type', 'submit');
        submitButton.setAttribute('class', 'pass-form-button');
        submitButton.textContent = 'Submit';
        form.appendChild(submitButton);
    });
</script>

{% endblock %}